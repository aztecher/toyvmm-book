<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with EazyDraw for Mac ( http://www.eazydraw.com/ ) -->

<svg
    version="1.1"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:cc="http://creativecommons.org/ns#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns="http://www.w3.org/2000/svg"
    width="476.405628725"
    height="426.991865114"
    viewBox="0, 0, 476.405628725, 426.991865114"
    preserveAspectRatio="none"
    id="svg2">
   <defs
       id="defs_A7BE1CC9">
      <marker
          orient="auto"
          refX="0.0"
          refY="0.0"
          id="3FB8EBC8_start_arrow"
          style="overflow:visible"
          markerUnits="userSpaceOnUse">
         <path
             id="3FB8EBC8_start_arrow_path"
             style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;fill-rule:nonzero;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.25;stroke-miterlimit:10"
             d="M0,0 L7.517540966287,-2.736161146605 L7.517540966287,2.736161146605 z"/>
      </marker>
      <marker
          orient="auto"
          refX="0.0"
          refY="0.0"
          id="9684D7D8_end_arrow"
          style="overflow:visible"
          markerUnits="userSpaceOnUse">
         <path
             id="9684D7D8_end_arrow_path"
             style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;fill-rule:nonzero;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.25;stroke-miterlimit:10"
             d="M0,0 L-7.517540966287,2.736161146605 L-7.517540966287,-2.736161146605 z"/>
      </marker>
      <marker
          orient="auto"
          refX="0.0"
          refY="0.0"
          id="255DF099_end_arrow"
          style="overflow:visible"
          markerUnits="userSpaceOnUse">
         <path
             id="255DF099_end_arrow_path"
             style="fill:#FF0000;fill-opacity:1;stroke:#FF0000;stroke-opacity:1;fill-rule:nonzero;stroke-linecap:square;stroke-linejoin:miter;stroke-width:0.25;stroke-miterlimit:10"
             d="M0,0 L-7.517540966287,2.736161146605 L-7.517540966287,-2.736161146605 z"/>
      </marker>
   </defs>
   <metadata
       id="metadata7">
      <rdf:RDF>
         <cc:Work
             rdf:about="">
            <dc:format>image/svg+xml</dc:format>
            <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
            <dc:title></dc:title>
         </cc:Work>
      </rdf:RDF>
   </metadata>
   <g
       id="layer_Paper"
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-opacity:1;fill-rule:nonzero;stroke-linecap:square;stroke-linejoin:miter;stroke-width:1;stroke-miterlimit:10">
      <rect
          style="fill:none;stroke:none"
          id="6802B989"
          x="0"
          y="0"
          width="476.405628725"
          height="426.991865114"/>
      <line
          style="fill:none;marker-start:url(#3FB8EBC8_start_arrow)"
          id="3FB8EBC8"
          x1="143.658012648"
          y1="26.3575566249"
          x2="20.3886387671"
          y2="26.3575566249"/>
      <text
          id="FCCD2DC8"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="36.2149322347" y="19.5137259176">KVM_CREATE_IRQCHIP</tspan>
      </text>
      <text
          id="22D31FC8"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="158.275605242" y="28.9848652453">kvm_pic_init</tspan>
         <tspan x="158.275605242" y="39.9848652453">kvm_ioapic_init</tspan>
         <tspan x="158.275605242" y="61.9848652453">kvm_setup_default_irq_routing</tspan>
         <tspan x="158.275605242" y="72.9848652453" font-family="Hiragino Sans">→</tspan>
         <tspan>&#x20;kvm_set_irq_routing</tspan>
         <tspan x="158.275605242" y="85.9848733515" font-family="Hiragino Sans">→</tspan>
         <tspan>&#x20;setup_routing_entry</tspan>
         <tspan x="158.275605242" y="98.9848814577" font-family="Hiragino Sans">→</tspan>
         <tspan>&#x20;kvm_set_routing_entry</tspan>
         <tspan x="158.275605242" y="109.984889564" font-family="Hiragino Sans" font-size="6">　　　</tspan>
         <tspan font-size="6">kvm_kernel_irq_routing_entry *e</tspan>
         <tspan x="158.275605242" y="119.984895644" font-family="Hiragino Sans" font-size="6">　　　（PIC MASTER）</tspan>
         <tspan font-size="6">e-&gt;set = kvm_set_pic_irq;</tspan>
         <tspan x="158.275605242" y="129.984901723" font-family="Hiragino Sans" font-size="6">　　　（IOAPIC）e</tspan>
         <tspan font-size="6">-&gt;set = kvm_set_ioapic_irq;</tspan>
      </text>
      <rect
          style="fill:none"
          id="8BEE75D8"
          x="337.456275473"
          y="54.8177401308"
          width="55.9158854329"
          height="57.4636636059"/>
      <line
          style="fill:none"
          id="242AB5D8"
          x1="364.653788546"
          y1="26.3575566252"
          x2="224.845113136"
          y2="26.3575566252"/>
      <line
          style="fill:none"
          id="7359F5D8"
          x1="432.976905707"
          y1="37.8862165277"
          x2="224.557470293"
          y2="37.8862165277"/>
      <line
          style="fill:none;marker-end:url(#9684D7D8_end_arrow)"
          id="9684D7D8"
          x1="364.985587515"
          y1="26.4370358707"
          x2="364.985587515"
          y2="54.7564904157"/>
      <line
          style="fill:none;marker-end:url(#9684D7D8_end_arrow)"
          id="90271AD8"
          x1="432.940324377"
          y1="38.8936482795"
          x2="432.940324377"
          y2="54.6323945501"/>
      <text
          id="45907DD8"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="358.851753914" y="63.8325953">PIC</tspan>
      </text>
      <rect
          style="fill:none"
          id="538FEED8"
          x="342.407618996"
          y="69.6095100174"
          width="45.4131825858"
          height="16.3252308693"/>
      <text
          id="A1235FD8"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="349.031327755" y="80.7491752434">MASTER</tspan>
      </text>
      <text
          id="DD4BCFD8"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="353.545622166" y="102.615706372">SLAVE</tspan>
      </text>
      <rect
          style="fill:none"
          id="4BA3B1E8"
          x="342.500355211"
          y="91.3950522649"
          width="45.4131825858"
          height="16.3252308693"/>
      <rect
          style="fill:none"
          id="9A1013E8"
          x="404.906900899"
          y="54.8177401312"
          width="55.9158854329"
          height="57.4636636059"/>
      <text
          id="D6F334E8"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="419.335273395" y="63.8325953002">IOAPIC</tspan>
      </text>
      <rect
          style="fill:none"
          id="DC51BCF8"
          x="336.931007665"
          y="122.977607259"
          width="55.9158854329"
          height="70.785467111"/>
      <text
          id="F6CFDCF8"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="352.131295859" y="135.158145597">Default </tspan>
         <tspan x="351.167295859" y="146.158145597">Routing</tspan>
      </text>
      <line
          style="fill:none"
          id="C6A4FDF8"
          x1="345.855419927"
          y1="157.459499159"
          x2="383.940631835"
          y2="157.459499159"/>
      <line
          style="fill:none"
          id="1D112EF8"
          x1="345.855419927"
          y1="161.850290565"
          x2="383.940631835"
          y2="161.850290565"/>
      <line
          style="fill:none"
          id="8BCD5EF8"
          x1="345.855419927"
          y1="166.241081971"
          x2="383.940631835"
          y2="166.241081971"/>
      <line
          style="fill:none"
          id="3C589EF8"
          x1="345.855419927"
          y1="170.631873377"
          x2="383.940631835"
          y2="170.631873377"/>
      <line
          style="fill:none"
          id="D534BEF8"
          x1="345.855419927"
          y1="175.022664783"
          x2="383.940631835"
          y2="175.022664783"/>
      <line
          style="fill:none"
          id="9E23DEF8"
          x1="345.855419927"
          y1="179.413456189"
          x2="383.940631835"
          y2="179.413456189"/>
      <line
          style="fill:none"
          id="D2F4EEF8"
          x1="345.855419927"
          y1="183.804247595"
          x2="383.940631835"
          y2="183.804247595"/>
      <line
          style="fill:none"
          id="6145FEF8"
          x1="345.855419927"
          y1="188.195039001"
          x2="383.940631835"
          y2="188.195039001"/>
      <line
          style="fill:none;marker-start:url(#3FB8EBC8_start_arrow)"
          id="D89B7B09"
          x1="143.658012648"
          y1="223.986154393"
          x2="20.3886387667"
          y2="223.986154393"/>
      <text
          id="F89B7B09"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="56.7829322347" y="217.142323685">KVM_IRQFD</tspan>
      </text>
      <text
          id="96B5FB09"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="158.275605242" y="226.613463013">kvm_irqfd</tspan>
         <tspan x="158.275605242" y="237.613463013" font-family="Hiragino Sans">→</tspan>
         <tspan>&#x20;kvm_irqfd_assign</tspan>
         <tspan x="158.275605242" y="249.613471119" font-family="Hiragino Sans">　　irqfd-&gt;gsi = args-&gt;gsi</tspan>
         <tspan x="158.275605242" y="261.613479226" font-family="Hiragino Sans">　　irqfd-&gt;wait-&gt;func = irqfd_wakeup</tspan>
      </text>
      <g
          id="9A7F2419">
         <line
             style="fill:none;marker-start:url(#3FB8EBC8_start_arrow)"
             id="369B3219"
             x1="145.212947923"
             y1="312.935043547"
             x2="88.5584906112"
             y2="345.644509727"/>
         <line
             style="fill:none"
             id="0FB07219"
             x1="77.4742786892"
             y1="325.496487356"
             x2="20.8198213772"
             y2="358.205953535"/>
         <line
             style="fill:none"
             id="5CECE219"
             x1="77.458655298"
             y1="325.555648872"
             x2="88.460928929"
             y2="345.618658103"/>
      </g>
      <text
          id="C30C9519"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="63.7749322347" y="313.142428708">Interrupt</tspan>
      </text>
      <text
          id="AAC92719"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="158.275605242" y="314.756508475">irqfd_wakeup</tspan>
         <tspan x="158.275605242" y="325.756508475" font-family="Hiragino Sans">→</tspan>
         <tspan>&#x20;schedule_work(irqfd-&gt;inject)</tspan>
         <tspan x="158.275605242" y="338.756516581" font-family="Hiragino Sans">→</tspan>
         <tspan>&#x20;irqfd_inject</tspan>
         <tspan x="158.275605242" y="351.756524687" font-family="Hiragino Sans">→</tspan>
         <tspan>&#x20;kvm_set_irq</tspan>
         <tspan x="158.275605242" y="363.756532793" font-family="Hiragino Sans">　　irq_set = kvm_irq_map_gsi(_, _, irq)</tspan>
         <tspan x="158.275605242" y="375.7565409" font-family="Hiragino Sans">　　irq_set[i].set(_, _, _, _)</tspan>
      </text>
      <line
          style="fill:none"
          id="971E2249"
          x1="324.97931608"
          y1="97.2881042151"
          x2="254.163755695"
          y2="97.2881042151"/>
      <rect
          style="fill:none"
          id="1E5C8249"
          x="404.906900898"
          y="123.193949337"
          width="55.9158854329"
          height="71.1180521161"/>
      <line
          style="fill:none"
          id="11770349"
          x1="324.925117705"
          y1="98.1093395577"
          x2="324.925117705"
          y2="156.849886035"/>
      <polyline
          style="fill:none;marker-end:url(#9684D7D8_end_arrow)"
          id="CF969549"
          points="393.561049987,157.180541505 404.645931777,157.180541505"/>
      <polyline
          style="fill:none"
          id="ED8DB549"
          points="324.895636986,157.180541505 336.322472554,157.180541505"/>
      <text
          id="E1FF6849"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="426.076455148" y="150.261722712">IRQ</tspan>
         <tspan x="418.916455148" y="161.261722712">Routing</tspan>
         <tspan x="423.284455148" y="172.261722712">Table</tspan>
      </text>
      <rect
          style="fill:none"
          id="C14B1C49"
          x="360.294179781"
          y="224.02521003"
          width="100.460807659"
          height="45.2621568875"/>
      <text
          id="43E18C49"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="373.931329996" y="238.15455193">irqfd</tspan>
      </text>
      <line
          style="fill:none"
          id="27A92D49"
          x1="407.905886756"
          y1="232.025285472"
          x2="445.991098664"
          y2="232.025285472"/>
      <line
          style="fill:none"
          id="37A92D49"
          x1="407.905886755"
          y1="236.416076878"
          x2="445.991098663"
          y2="236.416076878"/>
      <line
          style="fill:none"
          id="47A92D49"
          x1="407.905886755"
          y1="240.806868284"
          x2="445.991098663"
          y2="240.806868284"/>
      <line
          style="fill:none"
          id="57A92D49"
          x1="407.905886755"
          y1="245.19765969"
          x2="445.991098663"
          y2="245.19765969"/>
      <line
          style="fill:none"
          id="67A92D49"
          x1="406.229946737"
          y1="249.588451096"
          x2="445.991098663"
          y2="249.588451096"/>
      <line
          style="fill:none"
          id="87A92D49"
          x1="407.905886755"
          y1="253.979242502"
          x2="445.991098663"
          y2="253.979242502"/>
      <line
          style="fill:none"
          id="97A92D49"
          x1="407.905886755"
          y1="258.370033908"
          x2="445.991098663"
          y2="258.370033908"/>
      <line
          style="fill:none"
          id="A7A92D49"
          x1="407.905886755"
          y1="262.760825314"
          x2="445.991098663"
          y2="262.760825314"/>
      <path
          style="fill:none"
          id="E1710059"
          d="M405.669770816,228.741130683 C405.148483043,228.741130683 404.627195271,228.741130683 404.105907499,228.741130683 C400.950221124,228.741130683 400.950221124,231.896817058 400.950221124,231.896817058 C400.950221124,232.174113851 400.950221124,232.174113851 400.950221124,232.728707439
C400.950221124,232.728707439 400.950221124,235.884393813 397.794534749,235.884393813 C400.950221124,235.884393813 400.950221124,239.040080188 400.950221124,239.040080188 C400.950221124,246.945080604 400.950221124,246.945080604 400.950221124,262.755081434
C400.950221124,262.755081434 400.950221124,265.910767809 404.105907499,265.910767809 C404.713252602,265.910767809 405.320597706,265.910767809 405.927942809,265.910767809"/>
      <circle
          style="fill:none"
          id="D2F67159"
          cx="382.383980457"
          cy="252.055185553"
          r="2.503350289462"/>
      <line
          style="fill:none"
          id="EE863259"
          x1="379.656818545"
          y1="252.278383443"
          x2="323.371961592"
          y2="252.425267984"/>
      <text
          id="B48B2359"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="322.978895446" y="247.789169198">eventfd</tspan>
      </text>
      <text
          id="9ABFE959"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="332.792119412" y="323.712163969">irqfd.gsi</tspan>
      </text>
      <rect
          style="fill:none"
          id="241ACA59"
          x="404.906900898"
          y="303.078472663"
          width="55.9158854329"
          height="71.1180521161"/>
      <text
          id="341ACA59"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="426.076455148" y="328.192438932">IRQ</tspan>
         <tspan x="418.916455148" y="339.192438932">Routing</tspan>
         <tspan x="423.284455148" y="350.192438932">Table</tspan>
      </text>
      <line
          style="fill:none;marker-end:url(#9684D7D8_end_arrow)"
          id="86EF9769"
          x1="370.794834379"
          y1="321.866529837"
          x2="404.319112899"
          y2="321.866529837"/>
      <line
          style="fill:none;marker-start:url(#3FB8EBC8_start_arrow)"
          id="EDE8E769"
          x1="370.705877691"
          y1="351.323212795"
          x2="404.230156211"
          y2="351.323212795"/>
      <text
          id="26793B69"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="335.384119412" y="351.699747216">irq_set</tspan>
      </text>
      <text
          id="E5415D69"
          style="stroke:none"
          font-family="Avenir"
          font-size="8"
          font-weight="normal"
          font-style="normal">
         <tspan x="335.421561231" y="391.470967079">irq_set[i].set(...)</tspan>
      </text>
      <line
          style="fill:none;marker-start:url(#3FB8EBC8_start_arrow)"
          id="339B5F69"
          x1="346.979511151"
          y1="380.531310274"
          x2="346.979511151"
          y2="360.666163496"/>
      <rect
          style="fill:none;stroke:#FF0000"
          id="34E73D89"
          x="167.813365218"
          y="102.69054252"
          width="136.960078662"
          height="33.8784742139"/>
      <line
          style="fill:none;stroke:#FF0000"
          id="46344E89"
          x1="367.832522457"
          y1="395.682147046"
          x2="389.138107769"
          y2="395.682147046"/>
      <line
          style="fill:none;stroke:#FF0000"
          id="DFC3EE89"
          x1="293.499424532"
          y1="137.43881291"
          x2="293.499424532"
          y2="202.649257835"/>
      <line
          style="fill:none;stroke:#FF0000"
          id="F7BD6F89"
          x1="293.465799596"
          y1="203.204015691"
          x2="470.540567456"
          y2="203.204015691"/>
      <line
          style="fill:none;stroke:#FF0000"
          id="D0A0AF89"
          x1="471.158453538"
          y1="203.169403066"
          x2="471.158453538"
          y2="413.20878265"/>
      <line
          style="fill:none;stroke:#FF0000"
          id="2861DF89"
          x1="470.912093493"
          y1="413.140757584"
          x2="379.038593124"
          y2="413.140757584"/>
      <line
          style="fill:none;stroke:#FF0000;marker-end:url(#255DF099_end_arrow)"
          id="255DF099"
          x1="378.890982689"
          y1="413.058836588"
          x2="378.890982689"
          y2="396.216896253"/>
   </g>
</svg>
